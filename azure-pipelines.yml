trigger:
- master
pool:
  vmImage: 'ubuntu-latest'
steps:
- task: DotNetCoreCLI@2
  inputs:
    command: 'publish'
    publishWebProjects: true
    arguments: '-c Debug - o $(Build.SourcesDirectory)/dotnet'
    replaceExistingArchive: true


- task: Bash@3
  inputs:
    targetType: 'inline'
    script: docker run -v $(Build.SourcesDirectory)/dotnet:/myapp/ --tty --rm veracode/pipeline-scan:cmd -vid $(VERACODE_API_ID) -vkey $(VERACODE_API_KEY) -f '/myapp/NodeGoat.zip'